+function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.BlurImg=t()}(this,function(){"use strict";function e(e){var e=e||{};for(var t in n)n.hasOwnProperty(t)&&!e.hasOwnProperty(t)&&(e[t]=n[t]);if(0===e.target.length)throw new Error("No blur elements detected!");for(var t in e.target)r(e.target[t],e)}function t(e,t){e.classList?e.classList.add(t):e.className+=" "+t}function a(){var e=(new Date).getTime(),t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var a=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?a:7&a|8).toString(16)});return t}function r(e,r){var n=!!e.getAttribute("data-preview-src")&&e.getAttribute("data-preview-src"),i=e.getAttribute("data-original-src"),o=e.getAttribute("data-width"),d=e.getAttribute("data-height"),l=document.createElement("div");if(l.className="blur-container",l.style.paddingBottom=d/o*100+"%",e.appendChild(l),n){var s=new Image;if(s.className="preview","css"===r.filter)t(s,"filter");else if("canvas"===r.filter)var c=document.createElement("canvas");s.src=n,l.appendChild(s),s.onload=function(){if(c){var e=a(),n=a();s.id=e,c.id=n,l.appendChild(c)}t(l,"preview-loaded"),r.onPreviewLoaded.call(this,l)}}var x=new Image;x.className="original",x.src=i,x.onload=function(){t(l,"original-loaded"),r.onOriginalLoaded.call(this,l)},l.appendChild(x)}var n={target:document.getElementsByClassName("blur-image"),filter:"css",onPreviewLoaded:function(){return!0},onOriginalLoaded:function(){return!0}};return{init:e}});